(this["webpackJsonpcsv-reader"]=this["webpackJsonpcsv-reader"]||[]).push([[0],{40:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n(8),s=n.n(c),a=(n(40),n(32)),r=n(7),i=n(18),u=n(9),l=n.n(u),p=n(10),d=n(6),j=n(77),f=n(17),b=n.n(f),m=n(12),h=n.n(m),O=n(4),x=n(3),g=["Cert related","Domain","File name","Module (specific)","No of Questions?","Nos","Product","Product specific","Question Mode","Question Type","Type","Skill Level","Source code","Source type","questionAnswers","commentsRow"];function w(e){var t=Object(o.useState)(),n=Object(d.a)(t,2),c=n[0],s=n[1],u=Object(o.useState)([]),f=Object(d.a)(u,2),m=f[0],w=f[1],v=Object(o.useState)([]),y=Object(d.a)(v,2),k=y[0],C=y[1],q=Object(o.useState)([]),T=Object(d.a)(q,2),L=T[0],S=T[1],A=Object(o.useState)(),N=Object(d.a)(A,2),Q=N[0],E=N[1],M=Object(o.useState)(),R=Object(d.a)(M,2),D=R[0],P=R[1],F=Object(o.useRef)(),U=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)(c);case 2:t=e.sent,w(t[0]),n=[],t[0].forEach((function(e){(e=e||"").toLowerCase().includes("option ")&&n.push(e.toLowerCase().replace("option ","").toLowerCase())})),B(t[0],t.slice(1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=Object(o.useCallback)((function(e,t){var n=Q?Object(i.a)({},Q):{};n[e]=n[e].filter((function(e,n){return n!==t})),E(n)}),[Q]),W=Object(o.useCallback)((function(e,t){var n=Q?Object(i.a)({},Q):{},o=Object(r.a)(L);o.some((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))||(o[o.length]=t,S(o)),n[e].some((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))||(n[e]=[].concat(Object(r.a)(n[e]),[t]),E(n))}),[Q,L]),I=Object(o.useCallback)((function(e){var t=D?Object(r.a)(D):[];t=t.filter((function(t,n){return n!==e})),P(t)}),[D]),J=Object(o.useCallback)((function(e){var t=D?Object(r.a)(D):[],n=Object(r.a)(L);n.some((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))||(n[n.length]=e,S(n)),t.some((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))||(t=[].concat(Object(r.a)(t),[e]),P(t))}),[D,L]),B=function(e,t){var n=t.map((function(t){var n=[],o=e.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,s=t[c];return"Answers"===o&&(s=(s=s.split(",")).map((function(e){return e.trim()})),e.single=1===s.length),"Tags"===o&&s&&(s=(s=s.split(",")).map((function(e){return e.trim()}))),o.toLowerCase().includes("option")&&s&&n.push(o.toLowerCase().replace("option ","")),e[o]=s,e}),{}),c=n.map((function(e){return{option:e,answer:o.Answers.some((function(t){return t===e}))}}));return o.questionAnswers=c,o}));C(n);var o={};n.forEach((function(e,t){if(e&&e.Tags){var n=e.Tags.map((function(e,t){return{id:t,name:e}}));o[t]=n}else o[t]=[]}));var c=[];n.forEach((function(e,t){e.Tags&&e.Tags.length>0&&e.Tags.forEach((function(e){c.some((function(t){return t.name===e}))||c.push({id:c.length,name:e})}))})),S(c),P(c),E(o)},V=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,o,s,r,u,p,d,j,f,b,m,O,x,w,v,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k[0],n=t["Cert related"],o=t.Domain,s=t.Product,r=t["Product specific"],u=t["Question Mode"],p=t["Question Type"],d=t.Type,j=t["Skill Level"],f=t["Source code"],b=t["Source type"],m=t.comments,O=k.slice(1).map((function(e){var t=e["Cert related"],n=e.Domain,o=(e["File name"],e["Module (specific)"],e["No of Questions?"],e.Nos,e.Product),s=e["Product specific"],r=e["Question Mode"],u=e["Question Type"],l=e.Type,p=e["Skill Level"],d=e["Source code"],j=e["Source type"],f=e.questionAnswers,b=e.commentsRow,m=Object(a.a)(e,g),h=Object(i.a)({},m);h.certRelated=t,h.domain=n,h.product=o,h.fileName=c.name,h.productSpecific=s,h.questionMode=r,h.questionType=u,h.type=l,h.skillLevel=p,h.sourceCode=d,h.sourceType=j,h.comments=b,h.question=h.Question;var O=[];return console.log("qnsToSave",h),f.forEach((function(e){"Option ".concat(e.option)in h&&O.push({option:h["Option ".concat(e.option)],answer:e.answer})})),h.optionsWithAnswers=O,h})),console.log("arrayToStore",O),(x=new FormData).append("questionFile",c),D.forEach((function(e){x.append("tags",e.name)})),x.append("certRelated",n),x.append("domain",o),x.append("noOfQuestions",O.length),x.append("product",s),x.append("productSpecific",r),x.append("questionMode",u),x.append("questionType",p),x.append("skillLevel",j),x.append("sourceCode",f),x.append("type",d),x.append("sourceType",b),x.append("comments",m),e.prev=19,e.next=22,h.a.post("".concat("https://eas-works.herokuapp.com","/api/questions/upload"),x);case 22:if(w=e.sent,console.log("file upload",w.data.qnsUpload),!w.data.status){e.next=31;break}return v=O.map((function(e){return console.log("item",e),{question:e.Question,optionsWithAnswers:e.optionsWithAnswers||[],single:e.single,fileName:e.fileName,tags:e.Tags||[],domain:e.domain,product:e.product,productSpecific:e.productSpecific,questionMode:e.questionMode,questionType:e.questionType,type:e.type,skillLevel:e.skillLevel,sourceCode:e.sourceCode,sourceType:e.sourceType,comments:e.comments,fileUploadId:w.data.qnsUpload._id}})),console.log("data",v),e.next=29,h.a.post("".concat("https://eas-works.herokuapp.com","/api/questions/setQuestions"),{questions:v});case 29:y=e.sent,console.log("questions",y.data.questions);case 31:e.next=35;break;case 33:e.prev=33,e.t0=e.catch(19);case 35:case"end":return e.stop()}}),e,null,[[19,33]])})));return function(){return e.apply(this,arguments)}}(),z=function(e,t,n){var o,c=function(t){var n=Object(r.a)(k),o=Object(r.a)(n[e].questionAnswers);o=o.map((function(e){return e.option===t.target.value?e.answer=!0:e.answer=!1,e})),n[e].questionAnswers=o,C(n)},s=function(t){var n=Object(r.a)(k),o=Object(r.a)(n[e].questionAnswers);o=o.map((function(e){return e.option===t.target.value&&(e.answer=!e.answer),e})),n[e].questionAnswers=o,C(n)};return o=t?Object(x.jsx)(O.c,{check:!0,children:Object(x.jsx)(O.b,{children:Object(x.jsx)(O.f,{children:n.map((function(e,t){return Object(x.jsxs)(O.a,{children:[Object(x.jsx)(O.d,{type:"radio",name:"radio".concat(t),checked:e.answer,value:e.option,onChange:c}),Object(x.jsx)(O.e,{check:!0,children:e.option})]},t)}))})})}):Object(x.jsx)(O.b,{children:Object(x.jsx)(O.f,{children:Object(x.jsx)(O.a,{children:n.map((function(e,t){return Object(x.jsxs)(O.c,{check:!0,children:[Object(x.jsx)(O.d,{type:"checkbox",checked:e.answer,value:e.option,onChange:s}),Object(x.jsx)(O.e,{check:!0,children:e.option})]},t)}))})})}),o};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("form",{id:"csv-form",className:"col-xs-9",children:Object(x.jsxs)(O.b,{className:"mt-5",children:[Object(x.jsxs)(O.f,{className:"justify-content-center mb-3",children:[Object(x.jsx)(O.a,{sm:10,children:Object(x.jsx)(O.d,{name:"file",type:"file",accept:".xlsx",id:"csvFile",onClick:function(e){C([]),P([])},onChange:function(e){s(e.target.files[0])}})}),Object(x.jsx)(O.a,{sm:"auto",className:"p-0",children:Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),c&&U()},style:{padding:"5px"},children:"Upload Excel"})})]}),L&&L.length>0&&Object(x.jsx)(O.f,{className:"justify-content-center mb-3",children:Object(x.jsx)(b.a,{ref:F,minQueryLength:1,tags:D||[],allowNew:!0,suggestions:L||[],onDelete:I,onAddition:J})}),k.length>0&&Object(x.jsx)(O.f,{className:"justify-content-center mb-3",children:Object(x.jsx)(O.a,{xs:1,children:Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),V()},style:{padding:"5px"},children:"Submit"})})})]})}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),k.length>0?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(O.g,{bordered:!0,striped:!0,hover:!0,children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{className:"question-header",children:m.map((function(e,t){return Object(x.jsx)("th",{children:e},t)}))})}),Object(x.jsx)("tbody",{children:k.map((function(e,t){return Object(x.jsx)("tr",{children:m.map((function(n,o){return 0===o?Object(x.jsx)("td",{className:"question-first-col",children:e[m[o]]},o):"Tags"===n?Object(x.jsx)("td",{children:Object(x.jsx)(b.a,{ref:F,minQueryLength:1,tags:Q?Q[t]:[],allowNew:!0,suggestions:L||[],onDelete:_.bind(null,t),onAddition:W.bind(null,t)},o)}):"Answers"===n?Object(x.jsx)("td",{children:z(t,e.single,e.questionAnswers)}):Object(x.jsx)("td",{children:e[m[o]]})}))},t)}))})]})}):null]})}n(68);console.log("REACT_APP_SERVER_URL","https://eas-works.herokuapp.com");var v=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(w,{})})};n(69);s.a.render(Object(x.jsx)(v,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.f0848a6c.chunk.js.map