{"version":3,"sources":["components/QuestionAnswersCSVUpload.js","App.js","index.js"],"names":["CSVReader","props","useState","csvFile","setCsvFile","headers","setHeaders","csvArray","setCsvArray","tagsList","setTagsList","tags","setTags","mainTags","setMainTags","reactTags","useRef","main","a","readXlsxFile","rows","opt","forEach","el","toLowerCase","includes","push","replace","processCSV","slice","onDelete","useCallback","i","tagIndex","prevTags","filter","_","onAddition","newTag","prevTagsList","some","s","name","length","onDeleteMain","onAdditionMain","hdrs","newArray","map","row","qnsOptions","eachObject","reduce","obj","header","value","split","v","trim","single","answers","qns","option","answer","Answers","questionAnswers","tagsArr","item","index","Tags","tagsArray","it","id","tagsSuggestionsArr","t","submit","certRelated","Domain","Product","productSpecific","questionMode","questionType","skillLevel","sourceCode","sourceType","comments","arrayToStore","question","DomainRow","ProductRow","Nos","rest","commentsRow","qnsToSave","domain","product","fileName","Question","optionsWithAnswers","console","log","qnsAns","formData","FormData","append","axios","post","process","response","data","qnsUpload","status","fileUploadId","_id","questions","resp","giveAnswers","isSingle","markup","onRadioChange","e","currCsvArr","currentIndexQnsAns","curr","target","onCheckedChange","ech","check","ans","type","checked","onChange","className","sm","accept","onClick","files","preventDefault","style","padding","ref","minQueryLength","allowNew","suggestions","xs","bordered","striped","hover","h","bind","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e40f89df.chunk.js","sourcesContent":["import { useRef, useState, useCallback } from \"react\";\r\nimport readXlsxFile from \"read-excel-file\";\r\nimport ReactTags from \"react-tag-autocomplete\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Table,\r\n  Input,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  FormGroup,\r\n  Label,\r\n} from \"reactstrap\";\r\nexport default function CSVReader(props) {\r\n  // const { isheader, isSrNo, answerColumnIndex, headerProps } = props;\r\n  const [csvFile, setCsvFile] = useState();\r\n  const [headers, setHeaders] = useState([]);\r\n  const [csvArray, setCsvArray] = useState([]);\r\n  // const [options, setOptions] = useState([]);\r\n  const [tagsList, setTagsList] = useState([]);\r\n  const [tags, setTags] = useState();\r\n  const [mainTags, setMainTags] = useState();\r\n  const reactTags = useRef();\r\n  // [{name: \"\", age: 0, rank: \"\"},{name: \"\", age: 0, rank: \"\"}]\r\n  const main = async () => {\r\n    const rows = await readXlsxFile(csvFile);\r\n    // console.log(\"** Done **\", rows);\r\n    setHeaders(rows[0]);\r\n    const opt = [];\r\n    rows[0].forEach((el) => {\r\n      el = el || \"\";\r\n      if (el.toLowerCase().includes(\"option \")) {\r\n        opt.push(el.toLowerCase().replace(\"option \", \"\").toLowerCase());\r\n      }\r\n    });\r\n    // setOptions(opt);\r\n    processCSV(rows[0], rows.slice(1));\r\n  };\r\n  const onDelete = useCallback(\r\n    (i, tagIndex) => {\r\n      const prevTags = tags ? { ...tags } : {};\r\n      prevTags[i] = prevTags[i].filter((_, i) => i !== tagIndex);\r\n      setTags(prevTags);\r\n    },\r\n    [tags]\r\n  );\r\n\r\n  const onAddition = useCallback(\r\n    (i, newTag) => {\r\n      const prevTags = tags ? { ...tags } : {};\r\n      const prevTagsList = [...tagsList];\r\n      if (\r\n        !prevTagsList.some(\r\n          (s) => s.name.toLowerCase() === newTag.name.toLowerCase()\r\n        )\r\n      ) {\r\n        prevTagsList[prevTagsList.length] = newTag;\r\n        setTagsList(prevTagsList);\r\n      }\r\n      if (\r\n        prevTags[i].some(\r\n          (s) => s.name.toLowerCase() === newTag.name.toLowerCase()\r\n        )\r\n      )\r\n        return;\r\n      prevTags[i] = [...prevTags[i], newTag];\r\n      setTags(prevTags);\r\n    },\r\n    [tags, tagsList]\r\n  );\r\n  const onDeleteMain = useCallback(\r\n    (tagIndex) => {\r\n      let prevTags = mainTags ? [...mainTags] : [];\r\n      prevTags = prevTags.filter((_, i) => i !== tagIndex);\r\n      setMainTags(prevTags);\r\n    },\r\n    [mainTags]\r\n  );\r\n\r\n  const onAdditionMain = useCallback(\r\n    (newTag) => {\r\n      let prevTags = mainTags ? [...mainTags] : [];\r\n      const prevTagsList = [...tagsList];\r\n      if (\r\n        !prevTagsList.some(\r\n          (s) => s.name.toLowerCase() === newTag.name.toLowerCase()\r\n        )\r\n      ) {\r\n        prevTagsList[prevTagsList.length] = newTag;\r\n        setTagsList(prevTagsList);\r\n      }\r\n      if (\r\n        prevTags.some((s) => s.name.toLowerCase() === newTag.name.toLowerCase())\r\n      )\r\n        return;\r\n      prevTags = [...prevTags, newTag];\r\n      setMainTags(prevTags);\r\n    },\r\n    [mainTags, tagsList]\r\n  );\r\n  const processCSV = (hdrs, rows) => {\r\n    const newArray = rows.map((row) => {\r\n      const qnsOptions = [];\r\n      const eachObject = hdrs.reduce((obj = {}, header, i) => {\r\n        let value = row[i];\r\n        if (header === \"Answers\") {\r\n          value = value.split(\",\");\r\n          value = value.map((v) => v.trim());\r\n          obj.single = value.length === 1;\r\n        }\r\n        if (header === \"Tags\" && value) {\r\n          value = value.split(\",\");\r\n          value = value.map((v) => v.trim());\r\n        }\r\n        if (header.toLowerCase().includes(\"option\") && value) {\r\n          qnsOptions.push(header.toLowerCase().replace(\"option \", \"\"));\r\n        }\r\n        obj[header] = value;\r\n\r\n        // obj[header] = values[i].slice(0, values[i].indexOf(\"\\r\"));\r\n        return obj;\r\n      }, {});\r\n      const answers = qnsOptions.map((qns) => {\r\n        return {\r\n          option: qns,\r\n          answer: eachObject.Answers.some((a) => a === qns),\r\n        };\r\n      });\r\n      eachObject.questionAnswers = answers;\r\n      return eachObject;\r\n    });\r\n    setCsvArray(newArray);\r\n    const tagsArr = {};\r\n    newArray.forEach((item, index) => {\r\n      if (item && item.Tags) {\r\n        const tagsArray = item.Tags.map((it, i) => {\r\n          return { id: i, name: it };\r\n        });\r\n        tagsArr[index] = tagsArray;\r\n      } else {\r\n        tagsArr[index] = [];\r\n      }\r\n    });\r\n    const tagsSuggestionsArr = [];\r\n    newArray.forEach((item, index) => {\r\n      if (item.Tags && item.Tags.length > 0) {\r\n        item.Tags.forEach((t) => {\r\n          if (!tagsSuggestionsArr.some((it) => it.name === t)) {\r\n            tagsSuggestionsArr.push({ id: tagsSuggestionsArr.length, name: t });\r\n          }\r\n        });\r\n      }\r\n    });\r\n    setTagsList(tagsSuggestionsArr);\r\n    setMainTags(tagsSuggestionsArr);\r\n    setTags(tagsArr);\r\n  };\r\n  // console.log(\"tagsList\", tagsList);\r\n  // console.log(\"tags\", tags);\r\n  const submit = async () => {\r\n    const {\r\n      \"Cert related\": certRelated,\r\n      Domain,\r\n      // \"File name\": fileName,\r\n      // \"Module (specific)\": moduleSpecific,\r\n      // \"No of Questions?\": noOfQuestions,\r\n      // Nos,\r\n      Product,\r\n      \"Product specific\": productSpecific,\r\n      \"Question Mode\": questionMode,\r\n      \"Question Type\": questionType,\r\n      \"Skill Level\": skillLevel,\r\n      \"Source code\": sourceCode,\r\n      \"Source type\": sourceType,\r\n      comments,\r\n    } = csvArray[0];\r\n    const arrayToStore = csvArray.slice(1).map((question) => {\r\n      const {\r\n        \"Cert related\": certRelatedRow,\r\n        Domain: DomainRow,\r\n        \"File name\": fileNameRow,\r\n        \"Module (specific)\": moduleSpecificRow,\r\n        \"No of Questions?\": noOfQuestionsRow,\r\n        Nos: NosRow,\r\n        Product: ProductRow,\r\n        \"Product specific\": productSpecificRow,\r\n        \"Question Mode\": questionModeRow,\r\n        \"Question Type\": questionTypeRow,\r\n        \"Skill Level\": skillLevelRow,\r\n        \"Source code\": sourceCodeRow,\r\n        \"Source type\": sourceTypeRow,\r\n        questionAnswers,\r\n        commentsRow,\r\n        ...rest\r\n      } = question;\r\n      const qnsToSave = { ...rest };\r\n      qnsToSave.certRelated = certRelated;\r\n      qnsToSave.domain = DomainRow;\r\n      qnsToSave.product = ProductRow;\r\n      qnsToSave.fileName = csvFile.name;\r\n      qnsToSave.productSpecific = productSpecific;\r\n      qnsToSave.questionMode = questionMode;\r\n      qnsToSave.questionType = questionType;\r\n      qnsToSave.skillLevel = skillLevel;\r\n      qnsToSave.sourceCode = sourceCode;\r\n      qnsToSave.sourceType = sourceType;\r\n      qnsToSave.comments = comments;\r\n      qnsToSave.question = qnsToSave.Question;\r\n      const optionsWithAnswers = [];\r\n      console.log(\"qnsToSave\", qnsToSave);\r\n      questionAnswers.forEach((qnsAns) => {\r\n        if (`Option ${qnsAns.option}` in qnsToSave) {\r\n          optionsWithAnswers.push({\r\n            option: qnsToSave[`Option ${qnsAns.option}`],\r\n            answer: qnsAns.answer,\r\n          });\r\n        }\r\n      });\r\n      qnsToSave.optionsWithAnswers = optionsWithAnswers;\r\n      return qnsToSave;\r\n    });\r\n    console.log(\"arrayToStore\", arrayToStore);\r\n    // eachObject.tags = mainTags.map((t) => t.name);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"questionFile\", csvFile);\r\n    debugger;\r\n    mainTags.forEach((t) => {\r\n      formData.append(\"tags\", t.name);\r\n    });\r\n    formData.append(\"certRelated\", certRelated);\r\n    formData.append(\"domain\", Domain);\r\n    formData.append(\"noOfQuestions\", arrayToStore.length);\r\n    formData.append(\"product\", Product);\r\n    formData.append(\"productSpecific\", productSpecific);\r\n    formData.append(\"questionMode\", questionMode);\r\n\r\n    formData.append(\"questionType\", questionType);\r\n    formData.append(\"skillLevel\", skillLevel);\r\n    formData.append(\"sourceCode\", sourceCode);\r\n    formData.append(\"sourceType\", sourceType);\r\n    formData.append(\"comments\", comments);\r\n    try {\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_SERVER_URL}/api/questions/upload`,\r\n        formData\r\n      );\r\n      console.log(\"file upload\", response.data.qnsUpload);\r\n      if (response.data.status) {\r\n        const data = arrayToStore.map((item) => {\r\n          console.log(\"item\", item);\r\n          return {\r\n            question: item.Question,\r\n            optionsWithAnswers: item.optionsWithAnswers || [],\r\n            single: item.single,\r\n            fileName: item.fileName,\r\n            tags: item.Tags || [],\r\n            fileUploadId: response.data.qnsUpload._id,\r\n          };\r\n        });\r\n        console.log(\"data\", data);\r\n        const resp = await axios.post(\r\n          `${process.env.REACT_APP_SERVER_URL}/api/questions/setQuestions`,\r\n          { questions: data }\r\n        );\r\n        console.log(\"questions\", resp.data.questions);\r\n      }\r\n    } catch {}\r\n  };\r\n  const upload = () => {\r\n    main();\r\n    // const file = csvFile;\r\n    // const reader = new FileReader();\r\n\r\n    // reader.onload = function (e) {\r\n    //   const text = e.target.result;\r\n    //   console.log(text);\r\n    //   processCSV(text, \";\");\r\n    // };\r\n\r\n    // reader.readAsText(file);\r\n  };\r\n  // console.log(headers);\r\n  // console.log(\"csvArray\", csvArray);\r\n  // console.log(csvArray.length > 0);\r\n  // console.log(\"options\", options);\r\n  const giveAnswers = (index, isSingle, questionAnswers) => {\r\n    const onRadioChange = (e) => {\r\n      debugger;\r\n      const currCsvArr = [...csvArray];\r\n      let currentIndexQnsAns = [...currCsvArr[index].questionAnswers];\r\n      currentIndexQnsAns = currentIndexQnsAns.map((curr) => {\r\n        if (curr.option === e.target.value) {\r\n          curr.answer = true;\r\n        } else {\r\n          curr.answer = false;\r\n        }\r\n        return curr;\r\n      });\r\n      currCsvArr[index].questionAnswers = currentIndexQnsAns;\r\n      setCsvArray(currCsvArr);\r\n    };\r\n    const onCheckedChange = (e) => {\r\n      debugger;\r\n      const currCsvArr = [...csvArray];\r\n      let currentIndexQnsAns = [...currCsvArr[index].questionAnswers];\r\n      currentIndexQnsAns = currentIndexQnsAns.map((ech) => {\r\n        if (ech.option === e.target.value) ech.answer = !ech.answer;\r\n        return ech;\r\n      });\r\n      currCsvArr[index].questionAnswers = currentIndexQnsAns;\r\n      setCsvArray(currCsvArr);\r\n    };\r\n    let markup;\r\n    if (isSingle) {\r\n      markup = (\r\n        <FormGroup check>\r\n          <Container>\r\n            <Row>\r\n              {questionAnswers.map((ans, index) => {\r\n                return (\r\n                  <Col key={index}>\r\n                    <Input\r\n                      type=\"radio\"\r\n                      name={`radio${index}`}\r\n                      checked={ans.answer}\r\n                      value={ans.option}\r\n                      onChange={onRadioChange}\r\n                    />\r\n                    <Label check>{ans.option}</Label>\r\n                  </Col>\r\n                );\r\n              })}\r\n            </Row>\r\n          </Container>\r\n        </FormGroup>\r\n      );\r\n    } else {\r\n      markup = (\r\n        <Container>\r\n          <Row>\r\n            <Col>\r\n              {questionAnswers.map((ans, i) => {\r\n                return (\r\n                  <FormGroup check key={i}>\r\n                    <Input\r\n                      type=\"checkbox\"\r\n                      checked={ans.answer}\r\n                      value={ans.option}\r\n                      onChange={onCheckedChange}\r\n                    />\r\n                    <Label check>{ans.option}</Label>\r\n                  </FormGroup>\r\n                );\r\n              })}\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      );\r\n    }\r\n    return markup;\r\n  };\r\n  return (\r\n    <>\r\n      <form id=\"csv-form\" className=\"col-xs-9\">\r\n        <Container className=\"mt-5\">\r\n          <Row className=\"justify-content-center mb-3\">\r\n            <Col sm={10}>\r\n              <Input\r\n                name=\"file\"\r\n                type=\"file\"\r\n                accept=\".xlsx\"\r\n                id=\"csvFile\"\r\n                onClick={(e) => {\r\n                  setCsvArray([]);\r\n                  setMainTags([]);\r\n                }}\r\n                onChange={(e) => {\r\n                  setCsvFile(e.target.files[0]);\r\n                }}\r\n              />\r\n              {/* <input\r\n        type=\"file\"\r\n      ></input> */}\r\n              {/* <br /> */}\r\n            </Col>\r\n            <Col sm={\"auto\"} className=\"p-0\">\r\n              <button\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  if (csvFile) upload();\r\n                }}\r\n                style={{ padding: \"5px\" }}\r\n              >\r\n                Upload Excel\r\n              </button>\r\n            </Col>\r\n          </Row>\r\n          {tagsList && tagsList.length > 0 && (\r\n            <Row className=\"justify-content-center mb-3\">\r\n              <ReactTags\r\n                ref={reactTags}\r\n                minQueryLength={1}\r\n                tags={mainTags ? mainTags : []}\r\n                allowNew\r\n                suggestions={tagsList || []}\r\n                onDelete={onDeleteMain}\r\n                onAddition={onAdditionMain}\r\n              />\r\n            </Row>\r\n          )}\r\n          {csvArray.length > 0 && (\r\n            <Row className=\"justify-content-center mb-3\">\r\n              <Col xs={1}>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    submit();\r\n                  }}\r\n                  style={{ padding: \"5px\" }}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </Col>\r\n            </Row>\r\n          )}\r\n        </Container>\r\n      </form>\r\n      <br />\r\n      <br />\r\n      {csvArray.length > 0 ? (\r\n        <>\r\n          <Table bordered striped hover>\r\n            <thead>\r\n              <tr className=\"question-header\">\r\n                {headers.map((h, index) => {\r\n                  return <th key={index}>{h}</th>;\r\n                })}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {csvArray.map((item, i) => {\r\n                return (\r\n                  <tr key={i}>\r\n                    {headers.map((h, index) => {\r\n                      if (index === 0)\r\n                        return (\r\n                          <td className=\"question-first-col\" key={index}>\r\n                            {item[headers[index]]}\r\n                          </td>\r\n                        );\r\n                      if (h === \"Tags\") {\r\n                        return (\r\n                          <td>\r\n                            <ReactTags\r\n                              ref={reactTags}\r\n                              minQueryLength={1}\r\n                              tags={tags ? tags[i] : []}\r\n                              allowNew\r\n                              key={index}\r\n                              suggestions={tagsList || []}\r\n                              onDelete={onDelete.bind(null, i)}\r\n                              onAddition={onAddition.bind(null, i)}\r\n                            />\r\n                          </td>\r\n                        );\r\n                      } else if (h === \"Answers\") {\r\n                        return (\r\n                          <td>\r\n                            {giveAnswers(i, item.single, item.questionAnswers)}\r\n                          </td>\r\n                        );\r\n                      } else return <td>{item[headers[index]]}</td>;\r\n                    })}\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </Table>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n","import QuestionAnswersCSVUpload from \"./components/QuestionAnswersCSVUpload\";\nimport \"./App.css\";\nconsole.log(\"REACT_APP_SERVER_URL\", process.env.REACT_APP_SERVER_URL);\nfunction App() {\n  return (\n    <div className=\"App\">\n      <QuestionAnswersCSVUpload />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}