{"version":3,"sources":["components/EmployerProfileUpload.js","App.js","index.js"],"names":["EmployerProfileUpload","props","useState","csvFile","setCsvFile","headers","setHeaders","csvArray","setCsvArray","stepsObject","setStepsObject","main","a","readXlsxFile","rows","processCSV","slice","hdrs","newArray","map","row","eachObject","reduce","obj","header","i","value","trim","split","v","replace","name","imageUrl","objFinal","primaryDomain","module","products","jobRoles","forEach","item","Object","keys","length","hasOwnProperty","newProd","filter","pr","Product","some","p","push","jr","includes","prod","jobrol","console","log","EmployerSteps","option","submit","formData","FormData","append","JSON","stringify","axios","post","process","resp","data","talentProfileUpload","id","className","sm","type","accept","onClick","e","onChange","target","files","preventDefault","style","padding","xs","bordered","striped","hover","h","index","it","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bfc15acf.chunk.js","sourcesContent":["import { useState } from \"react\";\nimport readXlsxFile from \"read-excel-file\";\nimport axios from \"axios\";\nimport { Table, Input, Container, Row, Col } from \"reactstrap\";\nimport EmployerSteps from '../assets/employerquestion.json'\nexport default function EmployerProfileUpload(props) {\n\n  // const { isheader, isSrNo, answerColumnIndex, headerProps } = props;\n  const [csvFile, setCsvFile] = useState();\n  const [headers, setHeaders] = useState([]);\n\n  const [csvArray, setCsvArray] = useState([]);\n  const [stepsObject, setStepsObject] = useState({});\n  // [{name: \"\", age: 0, rank: \"\"},{name: \"\", age: 0, rank: \"\"}]\n  const main = async () => {\n    const rows = await readXlsxFile(csvFile);\n    setHeaders(rows[0]);\n    processCSV(rows[0], rows.slice(1));\n  };\n\n  const processCSV = (hdrs, rows) => {\n    // let uniqJobs = [...moduleUniqueJobs];\n    const newArray = rows.map((row) => {\n      let module;\n      const eachObject = hdrs.reduce((obj = {}, header, i) => {\n        if (i <= 4) {\n          let value = row[i];\n          if (i === 2) {\n            module = value;\n          }\n          if (header.trim() === \"Job roles\") {\n            // let moduleObj = uniqJobs.find((item) => item.module === module);\n            value = value || \"\";\n            value = value.split(\",\");\n            value = value.map((v) => v.replace(\"\\t\", \"\").trim());\n            // const res = [];\n            // value.forEach((item) => {\n            //   if (!res.includes(item)) res.push(item);\n            // });\n            // value = res;\n          }\n          if (header === \"Product\") {\n            value = value.split(\",\");\n            value = value.map((v) => ({ name: v.trim(), imageUrl: '' }));\n          }\n          obj[header] = value;\n        }\n        return obj;\n      }, {});\n      return eachObject;\n    });\n\n    setCsvArray(newArray);\n    const objFinal = {};\n    let primaryDomain = [];\n    let module = [];\n    let products = [];\n    let jobRoles = [];\n    newArray.forEach((item) => {\n\n      if (Object.keys(objFinal).length === 0 || !objFinal.hasOwnProperty([item[\"Role-Prefix and Product-Suffix\"]])) {\n        objFinal[item[\"Role-Prefix and Product-Suffix\"]] = { [\"Primary Domain\"]: item[\"Primary Domain\"], Modules: { [item[\"Modules\"]]: { Product: item[\"Product\"], [\"Job roles\"]: item[\"Job roles\"] } } };\n        primaryDomain.push({\n          \"value\": item[\"Primary Domain\"],\n          \"selected\": false,\n          \"disable\": false,\n          \"noOfYear\": \"\",\n          \"skill\": \"\"\n        })\n        module.push({\n          \"value\": item[\"Modules\"],\n          \"selected\": false,\n          \"disable\": false,\n          \"noOfYear\": \"\",\n          \"skill\": \"\",\n          \"group\": item[\"Primary Domain\"]\n        })\n        item[\"Product\"].forEach(prod => {\n          products.push({\n            \"value\": prod.name,\n            \"selected\": false,\n            \"disable\": false,\n            \"noOfYear\": \"\",\n            \"skill\": \"\",\n            \"group\": item[\"Modules\"]\n          })\n        })\n        item[\"Job roles\"].forEach(jobrol => {\n          jobRoles.push({\n            \"value\": jobrol,\n            \"selected\": false,\n            \"disable\": false,\n            \"noOfYear\": \"\",\n            \"skill\": \"\",\n            \"group\": item[\"Modules\"]\n          })\n        })\n      }\n      else {\n        objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Primary Domain\"] = item[\"Primary Domain\"]\n        if (Object.keys(objFinal[item[\"Role-Prefix and Product-Suffix\"]]).length === 0 || !objFinal[item[\"Role-Prefix and Product-Suffix\"]].hasOwnProperty(\"Modules\")) {\n          objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"] = { [item[\"Modules\"]]: { Product: item[\"Product\"], [\"Job roles\"]: item[\"Job roles\"] } }\n          module.push({\n            \"value\": item[\"Modules\"],\n            \"selected\": false,\n            \"disable\": false,\n            \"noOfYear\": \"\",\n            \"skill\": \"\",\n            \"group\": item[\"Primary Domain\"]\n          })\n          item[\"Product\"].forEach(prod => {\n            products.push({\n              \"value\": prod.name,\n              \"selected\": false,\n              \"disable\": false,\n              \"noOfYear\": \"\",\n              \"skill\": \"\",\n              \"group\": item[\"Modules\"]\n            })\n          })\n          item[\"Job roles\"].forEach(jobrol => {\n            jobRoles.push({\n              \"value\": jobrol,\n              \"selected\": false,\n              \"disable\": false,\n              \"noOfYear\": \"\",\n              \"skill\": \"\",\n              \"group\": item[\"Modules\"]\n            })\n          })\n        } else {\n          if (!objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"].hasOwnProperty(item[\"Modules\"])) {\n            objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"][item[\"Modules\"]] = { Product: item[\"Product\"], [\"Job roles\"]: item[\"Job roles\"] }\n          } else {\n            const newProd = item[\"Product\"].filter(pr => objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"][item[\"Modules\"]].Product.some(p => p.name === pr.name))\n            objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"][item[\"Modules\"]].Product.push(newProd)\n\n            const newJobRoles = item[\"Job roles\"].filter(jr => objFinal[item[\"Role-Prefix and Product-Suffix\"]][\"Modules\"][item[\"Modules\"]][\"Job roles\"].includes(jr))\n          }\n          module.push({\n            \"value\": item[\"Modules\"],\n            \"selected\": false,\n            \"disable\": false,\n            \"noOfYear\": \"\",\n            \"skill\": \"\",\n            \"group\": item[\"Primary Domain\"]\n          })\n          item[\"Product\"].forEach(prod => {\n            products.push({\n              \"value\": prod.name,\n              \"selected\": false,\n              \"disable\": false,\n              \"noOfYear\": \"\",\n              \"skill\": \"\",\n              \"group\": item[\"Modules\"]\n            })\n          })\n          item[\"Job roles\"].forEach(jobrol => {\n            jobRoles.push({\n              \"value\": jobrol,\n              \"selected\": false,\n              \"disable\": false,\n              \"noOfYear\": \"\",\n              \"skill\": \"\",\n              \"group\": item[\"Modules\"]\n            })\n          })\n        }\n\n      }\n    })\n    console.log(\"objFinal\", objFinal)\n\n    EmployerSteps[1].option = primaryDomain\n    EmployerSteps[2].option = module\n    EmployerSteps[3].option = jobRoles\n    EmployerSteps[5].option = products\n    console.log(\"EmployerSteps\", EmployerSteps)\n    // objFinal = {};\n    // rows.forEach((row) => {\n    //   hdrs.forEach((header, i) => {\n    //     debugger;\n    //     if (i <= 4) {\n    //       if (i === 0) {\n    //         if (!objFinal[row[0]]) objFinal[row[0]] = {};\n    //       }\n    //       if (i === 1) {\n    //         if (\n    //           Object.keys(objFinal[row[0]]).length === 0\n    //           //  ||\n    //           // (objFinal[row[0]].keys && !objFinal[row[0]][row[1]])\n    //         ) {\n    //           objFinal[row[0]][row[1]] = {};\n    //         }\n    //       }\n    //       if (i === 2) {\n    //         if (objFinal[row[0]][row[1]]) {\n    //           if (\n    //             Object.keys(objFinal[row[0]][row[1]]).length === 0 ||\n    //             (objFinal[row[0]][row[1]].keys && !objFinal[row[0]][row[1]][row[2]])\n    //           ) {\n    //             objFinal[row[0]][row[1]][row[2]] = {};\n    //           }\n    //         }\n\n    //       }\n    //       if (header === \"Product\" && objFinal[row[0]][row[1]] && objFinal[row[0]][row[1]][row[2]]) {\n    //         let value = row[i];\n    //         value = value.split(\",\");\n    //         value = value.map((v) => ({ name: v.trim(), imageUrl: '' }));\n    //         debugger;\n    //         if (objFinal[row[0]][row[1]][row[2]])\n    //           objFinal[row[0]][row[1]][row[2]].Product = value;\n    //       }\n    //       if (header.trim() === \"Job roles\" && objFinal[row[0]][row[1]] && objFinal[row[0]][row[1]][row[2]]) {\n    //         let value = row[i] || \"\";\n    //         value = value.split(\",\");\n    //         value = value.map((v) => v.trim());\n    //         if (objFinal[row[0]][row[1]][row[2]]) objFinal[row[0]][row[1]][row[2]].Jobs = value;\n    //       }\n    //     }\n    //   });\n    // });\n    setStepsObject(EmployerSteps);\n  };\n  console.log(\"csvArray\", csvArray);\n  // console.log(\"moduleUniqueJobs\", moduleUniqueJobs);\n  console.log(\"stepsObject\", stepsObject);\n  // console.log(\"sendArray\", sendArray);\n  const submit = async () => {\n    const formData = new FormData();\n    formData.append(\"employerProfileFile\", csvFile);\n    formData.append(\"steps\", JSON.stringify(stepsObject));\n    try {\n      const resp = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL}/api/employerProfile/setEmployerProfileSteps`,\n        formData\n      );\n      console.log(\"file upload\", resp.data.talentProfileUpload);\n    } catch { }\n  };\n  const upload = () => {\n    main();\n  };\n  return (\n    <>\n      <form id=\"csv-form\" className=\"col-xs-9\">\n        <Container className=\"mt-5\">\n          <Row className=\"justify-content-center mb-3\">\n            <Col sm={10}>\n              <Input\n                name=\"file\"\n                type=\"file\"\n                accept=\".xlsx\"\n                id=\"csvFile\"\n                onClick={(e) => {\n                  setCsvArray([]);\n                }}\n                onChange={(e) => {\n                  setCsvFile(e.target.files[0]);\n                }}\n              />\n              {/* <input\n        type=\"file\"\n      ></input> */}\n              {/* <br /> */}\n            </Col>\n            <Col sm={\"auto\"} className=\"p-0\">\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  if (csvFile) upload();\n                }}\n                style={{ padding: \"5px\" }}\n              >\n                Upload Excel\n              </button>\n            </Col>\n          </Row>\n          {csvArray.length > 0 && (\n            <Row className=\"justify-content-center mb-3\">\n              <Col xs={1}>\n                <button\n                  onClick={(e) => {\n                    e.preventDefault();\n                    submit();\n                  }}\n                  style={{ padding: \"5px\" }}\n                >\n                  Submit\n                </button>\n              </Col>\n            </Row>\n          )}\n        </Container>\n      </form>\n      <br />\n      <br />\n      {csvArray.length > 0 ? (\n        <>\n          <Table bordered striped hover>\n            <thead>\n              <tr className=\"question-header\">\n                {headers.map((h, index) => {\n                  return <th key={index}>{h}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {csvArray.map((item, i) => {\n                return (\n                  <tr key={i}>\n                    {headers.map((h, index) => {\n                      // if (index === 0)\n                      //   return (\n                      //     <td className=\"question-first-col\" key={index}>\n                      //       {item[headers[index]]}\n                      //     </td>\n                      //   );\n                      return index <= 4 ? (\n                        h === \"Product\" ? <td>{item[headers[index]].map(it => it.name)}</td> :\n                          <td>{item[headers[index]]}</td>\n                      ) : null;\n                    })}\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </>\n      ) : null}\n    </>\n  );\n}\n","import QuestionAnswersCSVUpload from \"./components/QuestionAnswersCSVUpload\";\nimport TalentProfileUpload from \"./components/TalentProfileUpload\";\nimport EmployerProfileUpload from \"./components/EmployerProfileUpload\";\nimport \"./App.css\";\nconsole.log(\"REACT_APP_SERVER_URL\", process.env.REACT_APP_SERVER_URL);\nfunction App() {\n  return (\n    <div className=\"App\">\n      <EmployerProfileUpload />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}